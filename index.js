require("tls").DEFAULT_MIN_VERSION="TLSv1.3";module.exports=(async(t="",e="")=>{if(!(t=(t+"").trim()).length||t.match(/\D/))throw Error("INVAILD_PHONE");let r=(e+="").split("v=");if(18!=(e=(r[1]||r[0]).match(/[0-9A-Za-z]+/)[0]).length)throw Error("INVAILD_VOUCHER");let o=await(await require("undici").fetch(`https://gift.truemoney.com/campaign/vouchers/${e}/redeem`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({mobile:t,voucher_hash:e})})).json();if("SUCCESS"==o.status.code)return{amount:Number(o.data.my_ticket.amount_baht.replace(/,/g,"")),owner_full_name:o.data.owner_profile.full_name,code:e};throw Error(o.status.code)});